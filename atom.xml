<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>InSo</title>
  
  
  <link href="http://jsunnyr.github.io/atom.xml" rel="self"/>
  
  <link href="http://jsunnyr.github.io/"/>
  <updated>2021-12-21T04:32:21.332Z</updated>
  <id>http://jsunnyr.github.io/</id>
  
  <author>
    <name>susu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/21/security/os-secure/linux-capability-%E5%88%A9%E7%94%A8capability%E8%BF%9B%E8%A1%8CLinux%E6%8F%90%E6%9D%83/"/>
    <id>http://jsunnyr.github.io/2021/12/21/security/os-secure/linux-capability-%E5%88%A9%E7%94%A8capability%E8%BF%9B%E8%A1%8CLinux%E6%8F%90%E6%9D%83/</id>
    <published>2021-12-21T04:32:21.332Z</published>
    <updated>2021-12-21T04:32:21.332Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/21/security/os-secure/linux-pam-pam%E8%AE%BE%E7%BD%AE/"/>
    <id>http://jsunnyr.github.io/2021/12/21/security/os-secure/linux-pam-pam%E8%AE%BE%E7%BD%AE/</id>
    <published>2021-12-21T04:29:47.942Z</published>
    <updated>2021-12-21T05:25:44.283Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置连续输错三次密码，账号锁定五分钟, /etc/pam.d/common-auth添加</span></span><br><span class="line">auth required pam_tally.so onerr=fail deny=3 unlock_time=300</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只允许test组用户su到root，则etc/pam.d/su添加</span></span><br><span class="line">auth required pam_wheel.so group=<span class="built_in">test</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/21/os/rpm/linux-file-profile/"/>
    <id>http://jsunnyr.github.io/2021/12/21/os/rpm/linux-file-profile/</id>
    <published>2021-12-21T04:21:47.171Z</published>
    <updated>2021-12-21T04:22:22.943Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span clas</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/19/os/performance-tuning/linux-kernel-parameters-sysctl/"/>
    <id>http://jsunnyr.github.io/2021/12/19/os/performance-tuning/linux-kernel-parameters-sysctl/</id>
    <published>2021-12-19T09:25:55.370Z</published>
    <updated>2021-12-19T09:26:59.820Z</updated>
    
    <content type="html"><![CDATA[<table><thead><tr><th>PArameter</th><th>usage</th><th>link</th></tr></thead><tbody><tr><td>vm.min_free_kbytes</td><td>保留给内核使用的；当到达min，系统会启动 kswapd0 进行内存回收</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;PArameter&lt;/th&gt;
&lt;th&gt;usage&lt;/th&gt;
&lt;th&gt;link&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;vm.min_free_kbytes&lt;/td&gt;
&lt;td&gt;保留给内核使用的；当到</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/19/os/performance-tuning/linux-cpu-analyse/"/>
    <id>http://jsunnyr.github.io/2021/12/19/os/performance-tuning/linux-cpu-analyse/</id>
    <published>2021-12-19T07:59:26.633Z</published>
    <updated>2021-12-19T08:04:48.605Z</updated>
    
    <content type="html"><![CDATA[<h1 id="共识"><a class="markdownIt-Anchor" href="#共识"></a> 共识</h1><ul><li>load average是对CPU负载进行评估的，其值越高说明其任务队列越长，处于等待执行的任务越多。出现此种情况时，可能是由于僵死进程导致的。可以通过<code>ps -axjf</code>命令查看是否存在 <strong>D+</strong> 状态进程，该状态是指不可中断的睡眠状态。处于该状态的进程无法终止，也无法自行退出。只能通过恢复其依赖的资源或者重启系统来解决。</li></ul><h1 id="cpu-analyse"><a class="markdownIt-Anchor" href="#cpu-analyse"></a> CPU analyse</h1><p>在Linux系统中，查看进程的常用命令如下所示。本文主要介绍vmstat和top。</p><ul><li>vmstat</li><li>top</li><li>ps -aux</li><li>ps -ef</li></ul><blockquote><p>for example</p><p><a href="https://help.aliyun.com/knowledge_detail/41225.html">Linux系统CPU负载的查询和案例分析</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st</span><br><span class="line"> 1  0      0 2684984 310452 2364304    0    0     5    17   19   35  4  2 94  0  0</span><br><span class="line"> 0  0      0 2687504 310452 2362268    0    0     0   252 1942 4326  5  2 93  0  0</span><br><span class="line"> 0  0      0 2687356 310460 2362252    0    0     0    68 1891 4449  3  2 95  0  0</span><br><span class="line"> 0  0      0 2687252 310460 2362256    0    0     0     0 1906 4616  4  1 95  0  0</span><br></pre></td></tr></table></figure><blockquote><p>注：返回结果中的主要数据列说明如下。</p><ul><li>r：表示系统中CPU等待处理的线程。一个CPU每次只能处理一个线程，所以该数值越大，通常表示系统运行越慢。</li><li>us：用户模式消耗的CPU时间百分比。该值较高时，说明用户进程消耗的CPU时间比较多。如果该值长期超过50%，则需要对程序算法或代码等进行优化。</li><li>sy：内核模式消耗的CPU时间百分比。</li><li>wa：IO等待消耗的CPU时间百分比。该值较高时，说明IO等待比较严重，这可能磁盘大量作随机访问造成的，也可能是磁盘性能出现了瓶颈。</li><li>id：处于空闲状态的CPU时间百分比。如果该值持续为0，同时sy是us的两倍，则通常说明系统面临CPU资源短缺。</li></ul></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;共识&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#共识&quot;&gt;&lt;/a&gt; 共识&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;load average是对CPU负载进行评估的，其值越高说明其任务队列越长，处于等待执行的任务越多。出现此种情况时，可能是由于僵死</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/19/os/rpm/linux-rhel-history-variable-history%E5%91%BD%E4%BB%A4%E5%8F%98%E9%87%8F%E8%AF%B4%E6%98%8E/"/>
    <id>http://jsunnyr.github.io/2021/12/19/os/rpm/linux-rhel-history-variable-history%E5%91%BD%E4%BB%A4%E5%8F%98%E9%87%8F%E8%AF%B4%E6%98%8E/</id>
    <published>2021-12-19T03:47:05.012Z</published>
    <updated>2021-12-19T04:21:52.077Z</updated>
    
    <content type="html"><![CDATA[<h1 id="history"><a class="markdownIt-Anchor" href="#history"></a> history</h1><h2 id="history-events"><a class="markdownIt-Anchor" href="#history-events"></a> History events</h2><p>The basic structure of shell <code>history</code> starts with a list of <code>events</code>. An <code>event</code> is anything you’ve entered into the shell, followed by the <code>Return</code> or <code>Enter</code> key. Each <code>event</code> is assigned an index number (a line number), and you can view and recall events by using <code>event designators</code>.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HISTTIMEFORMAT=<span class="string">&#x27;%F %T &#x27;</span></span><br><span class="line">HISTCONTROL=<span class="variable">$HISTCONTROL</span>:ignorespace:ignoredups</span><br><span class="line">HISTSIZE=100</span><br><span class="line">HISTFILESIZE=100</span><br><span class="line">HISTIGNORE=<span class="string">&#x27;ls&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> reference</h2><p><a href="https://www.redhat.com/sysadmin/stupid-bash-tricks">Stupid Bash tricks</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;history&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#history&quot;&gt;&lt;/a&gt; history&lt;/h1&gt;
&lt;h2 id=&quot;history-events&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/09/os/rpm/os-management-job-management/"/>
    <id>http://jsunnyr.github.io/2021/12/09/os/rpm/os-management-job-management/</id>
    <published>2021-12-09T06:43:22.435Z</published>
    <updated>2021-12-09T06:43:22.435Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/09/os/rpm/linux-autofs-%E5%AE%89%E8%A3%85autofs/"/>
    <id>http://jsunnyr.github.io/2021/12/09/os/rpm/linux-autofs-%E5%AE%89%E8%A3%85autofs/</id>
    <published>2021-12-09T06:16:32.336Z</published>
    <updated>2021-12-10T03:47:22.138Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/08/Untitled/"/>
    <id>http://jsunnyr.github.io/2021/12/08/Untitled/</id>
    <published>2021-12-08T05:48:09.649Z</published>
    <updated>2021-12-08T05:48:09.649Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/07/db/oracle/oracle-11-role-privileges-%E8%A7%92%E8%89%B2%E4%B8%8E%E6%9D%83%E9%99%90/"/>
    <id>http://jsunnyr.github.io/2021/12/07/db/oracle/oracle-11-role-privileges-%E8%A7%92%E8%89%B2%E4%B8%8E%E6%9D%83%E9%99%90/</id>
    <published>2021-12-07T05:18:03.215Z</published>
    <updated>2021-12-07T05:44:55.667Z</updated>
    
    <content type="html"><![CDATA[<h1 id="锁定与解锁"><a class="markdownIt-Anchor" href="#锁定与解锁"></a> 锁定与解锁</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select username,account_status from dba_users;</span><br><span class="line">alter user username account lock;</span><br><span class="line">alter user username account unlock;</span><br><span class="line">alter user username identified by new_password;</span><br><span class="line">alter user username identified by new_password account unlock;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="角色权限"><a class="markdownIt-Anchor" href="#角色权限"></a> 角色权限</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 查看某个用户有哪些角色</span></span><br><span class="line">select * from dba_role_privs <span class="built_in">where</span> grantee=<span class="string">&#x27;HR&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看某个角色被赋予了哪些用户</span></span><br><span class="line">select * from dba_role_privs <span class="built_in">where</span> granted_role=<span class="string">&#x27;DBA&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对象权限</span></span><br><span class="line">select * from dba_tab_privs;</span><br></pre></td></tr></table></figure><h2 id="授予权限"><a class="markdownIt-Anchor" href="#授予权限"></a> 授予权限</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看role</span></span><br><span class="line">select * from dba_roles;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 授予HR用户某些角色</span></span><br><span class="line">GRANT connect,resource TO <span class="string">&#x27;HR&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 授予HR用户dba角色时，要重新连接才能生效</span></span><br><span class="line">GRANT dba to <span class="string">&#x27;HR&#x27;</span>;</span><br><span class="line">REVOKE dba to <span class="string">&#x27;HR&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接授予HR用户某些权限</span></span><br><span class="line">GRANT CREATE VIEW TO <span class="string">&#x27;HR&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看某个系统用户是否有SYSDBA或者SYSOPER权限</span></span><br><span class="line">select * from v<span class="variable">$pwfile_users</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;锁定与解锁&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#锁定与解锁&quot;&gt;&lt;/a&gt; 锁定与解锁&lt;/h1&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Virt-manager</title>
    <link href="http://jsunnyr.github.io/2021/12/05/kvm/kvm-related/"/>
    <id>http://jsunnyr.github.io/2021/12/05/kvm/kvm-related/</id>
    <published>2021-12-05T13:57:53.764Z</published>
    <updated>2021-12-05T13:57:53.765Z</updated>
    
    <content type="html"><![CDATA[<h1 id="virt-manager"><a class="markdownIt-Anchor" href="#virt-manager"></a> Virt-manager</h1><ul><li><a href="https://virt-manager.org/">official: virt-manger</a></li><li><a href="https://github.com/virt-manager/virt-manager.git">official: virt-manger’s git</a></li></ul><p>The virt-manager application is a desktop user interface for managing virtual machines through libvirt. It primarily targets KVM VMs, but also manages Xen and LXC (linux containers). It presents a summary view of running domains, their live performance &amp; resource utilization statistics. Wizards enable the creation of new domains, and configuration &amp; adjustment of a domain’s resource allocation &amp; virtual hardware. An embedded VNC and SPICE client viewer presents a full graphical console to the guest domain.</p><p>virt-install is a command line tool which provides an easy way to provision operating systems into virtual machines.</p><p>virt-viewer is a lightweight UI interface for interacting with the graphical display of virtualized guest OS. It can display VNC or SPICE, and uses libvirt to lookup the graphical connection details.</p><p>virt-clone is a command line tool for cloning existing inactive guests. It copies the disk images, and defines a config with new name, UUID and MAC address pointing to the copied disks.</p><p>virt-xml is a command line tool for easily editing libvirt domain XML using virt-install’s command line options.</p><p>virt-bootstrap is a command tool providing an easy way to setup the root file system for libvirt-based containers.</p><hr /><blockquote><p>install <code>virt-manager</code> on each Linux Distribution</p></blockquote><blockquote><p><a href="https://virt-manager.org/download/">https://virt-manager.org/download/</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install virt-manager (Fedora)</span><br><span class="line">apt-get install virt-manager (Debian)</span><br><span class="line">emerge virt-manager (Gentoo)</span><br><span class="line">pkg_add virt-manager (OpenBSD)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;virt-manager&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#virt-manager&quot;&gt;&lt;/a&gt; Virt-manager&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://virt-manager.org/&quot;&gt;</summary>
      
    
    
    
    <category term="文章分类" scheme="http://jsunnyr.github.io/categories/%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB/"/>
    
    
    <category term="文章标签" scheme="http://jsunnyr.github.io/tags/%E6%96%87%E7%AB%A0%E6%A0%87%E7%AD%BE/"/>
    
  </entry>
  
  <entry>
    <title>Powershell Programming</title>
    <link href="http://jsunnyr.github.io/2021/12/05/win/windows-powershell-01-basic/"/>
    <id>http://jsunnyr.github.io/2021/12/05/win/windows-powershell-01-basic/</id>
    <published>2021-12-05T13:56:02.722Z</published>
    <updated>2021-12-07T00:58:40.484Z</updated>
    
    <content type="html"><![CDATA[<h1 id="powershell基础"><a class="markdownIt-Anchor" href="#powershell基础"></a> powershell基础</h1><ul><li>Windows PowerShell (Figure 1)</li><li>Windows PowerShell ISE (Figure 2)</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">command</span> -name &gt; -&lt; Required Parameter Name &gt; &lt;Required Parameter Value &gt;</span><br><span class="line">    [ -&lt; Optional Parameter Name &gt; &lt;Optional Parameter Value &gt;]</span><br><span class="line">    [ -&lt; Optional Switch Parameters &gt;]</span><br><span class="line">    [ -&lt; Optional Parameter Name &gt;] &lt;Required Parameter Value &gt;</span><br></pre></td></tr></table></figure><h2 id="帮助"><a class="markdownIt-Anchor" href="#帮助"></a> 帮助</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span> <span class="built_in">help</span></span><br><span class="line"><span class="built_in">help</span> verb-noun</span><br><span class="line">man verb-noun</span><br><span class="line"><span class="built_in">help</span> about</span><br><span class="line"><span class="built_in">help</span> about_for</span><br><span class="line"><span class="built_in">help</span> about_foreach</span><br><span class="line"><span class="built_in">help</span> about_if</span><br></pre></td></tr></table></figure><h2 id="常用函数"><a class="markdownIt-Anchor" href="#常用函数"></a> 常用函数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">get-alias</span><br><span class="line">clear-host cls, clear</span><br><span class="line">format-list fl</span><br><span class="line">get-childitem gci, ls, dir</span><br><span class="line">get-content gc, cat, <span class="built_in">type</span></span><br><span class="line">get-location gl, <span class="built_in">pwd</span></span><br><span class="line">get-member gm</span><br><span class="line">remove-item ri, rm, rmdir, del, erase, rd</span><br><span class="line">write-output write, <span class="built_in">echo</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">read-host</span><br><span class="line">write-host</span><br></pre></td></tr></table></figure><h2 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型"></a> 数据类型</h2><ul><li>integers</li><li>doubles</li><li>strings</li><li>arrays</li><li>hash tables</li><li>objects<ul><li>processes</li><li>services</li><li>event logs</li><li>computers</li><li>XML</li><li>anything else…</li></ul></li></ul><h2 id="powershell-环境"><a class="markdownIt-Anchor" href="#powershell-环境"></a> Powershell 环境</h2><p>Within a shell the environment is the term to describe the current settings.<br />These settings are exposed in environment variables</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(get-item <span class="variable">$env</span>:\username).value</span><br><span class="line"></span><br><span class="line"><span class="variable">$env</span>:username</span><br></pre></td></tr></table></figure><h2 id="语法要点"><a class="markdownIt-Anchor" href="#语法要点"></a> 语法要点</h2><ol start="0"><li><p>Windows不区分大小写</p></li><li><p>PowerShell casts the result based on the first variable type.</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PS M:\&gt; [ string ] <span class="variable">$a</span>=<span class="string">&quot;4&quot;</span></span><br><span class="line">PS M:\&gt; [ int] <span class="variable">$b</span> =7</span><br><span class="line">PS M:\&gt; <span class="variable">$a</span>+<span class="variable">$b</span></span><br><span class="line">47</span><br><span class="line">PS M:\&gt; <span class="variable">$b</span>+<span class="variable">$a</span></span><br><span class="line">11</span><br><span class="line">PS M:\&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>arrays</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PS M:\&gt; <span class="variable">$city</span> =(<span class="string">&quot; Edinburgh &quot;</span>,<span class="string">&quot; Glasgow &quot;</span>,<span class="string">&quot; Dundee &quot;</span>,<span class="string">&quot; Aberdeen &quot;</span>)</span><br><span class="line">PS M:\&gt; <span class="variable">$city</span> [3]</span><br><span class="line">Aberdeen</span><br><span class="line">PS M:\&gt; ( <span class="variable">$city</span> ). Length</span><br><span class="line">4</span><br></pre></td></tr></table></figure><ol start="3"><li>hash tables</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PS M:\&gt; <span class="variable">$pops</span> =@&#123;<span class="string">&quot; Glasgow &quot;</span> =976970; <span class="string">&quot; Edinburgh &quot;</span> =488610;</span><br><span class="line">&gt;&gt; <span class="string">&quot; Aberdeen &quot;</span> =209460; <span class="string">&quot; Dundee &quot;</span> =157690&#125;</span><br><span class="line">&gt;&gt;</span><br><span class="line">PS M:\&gt; <span class="variable">$pops</span></span><br><span class="line">Name Value</span><br><span class="line">---- -----</span><br><span class="line">Edinburgh 488610</span><br><span class="line">Glasgow 976970</span><br><span class="line">Dundee 157690</span><br><span class="line">Aberdeen 209460</span><br><span class="line">PS M:\&gt; <span class="variable">$pops</span>.Values | Measure-Object -average |gm</span><br><span class="line">PS M:\&gt; (<span class="variable">$pops</span>.Values | Measure-Object -average ).Average</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;powershell基础&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#powershell基础&quot;&gt;&lt;/a&gt; powershell基础&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Windows PowerShell (Figure 1)&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="Programming" scheme="http://jsunnyr.github.io/categories/Programming/"/>
    
    <category term="Powershell" scheme="http://jsunnyr.github.io/categories/Programming/Powershell/"/>
    
    
    <category term="Powershell" scheme="http://jsunnyr.github.io/tags/Powershell/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/win/windows-powershell-book/"/>
    <id>http://jsunnyr.github.io/2021/12/05/win/windows-powershell-book/</id>
    <published>2021-12-05T12:32:55.905Z</published>
    <updated>2021-12-05T12:32:55.906Z</updated>
    
    <content type="html"><![CDATA[<p>batch file programmging complete book premkumar.S<br />batch scripting<br />learn batch file programming by john albert<br />online reference</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;batch file programmging complete book premkumar.S&lt;br /&gt;
batch scripting&lt;br /&gt;
learn batch file programming by john albert&lt;br /&gt;
online re</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/sdn-vxlan/"/>
    <id>http://jsunnyr.github.io/2021/12/05/sdn-vxlan/</id>
    <published>2021-12-05T12:32:55.895Z</published>
    <updated>2021-12-05T12:32:55.895Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://blog.csdn.net/weixin_40274679/article/details/109266173">[S] csdn: 什么是VXLAN？</a></li><li><a href="https://blog.csdn.net/gengzhikui1992/article/details/79680240">csdn: overlay技术–理解VXLAN（L2 over UDP）、NVGRE（L2 over GRE）、STT(L2 over TCP)</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Reference&quot;&gt;&lt;a href=&quot;#Reference&quot; class=&quot;headerlink&quot; title=&quot;Reference&quot;&gt;&lt;/a&gt;Reference&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/weixi</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/db/redis/redis-%E5%AE%89%E8%A3%85/"/>
    <id>http://jsunnyr.github.io/2021/12/05/db/redis/redis-%E5%AE%89%E8%A3%85/</id>
    <published>2021-12-05T12:32:55.891Z</published>
    <updated>2021-12-05T12:32:55.891Z</updated>
    
    <content type="html"><![CDATA[<p>groupadd -g 1862 redis<br />useradd -u 1862 -g 1862 -d /redis redis<br />chmod -R 750 /redis<br />echo abcd1234 | passwd --stdin redis<br />chown -R redis:redis /redis<br />su - redis<br />cp -r /etc/skel/. ./<br />source .bash_profile<br />exit</p><p>usermod -a -G redis patrol<br />sed -i ‘/vm.overcommit_memory/d’ /etc/sysctl.conf<br />echo “vm.overcommit_memory = 1” &gt;&gt; /etc/sysctl.conf<br />sysctl -p<br />echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</p><p>vi /etc/rc.local</p><p>echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</p><p>vi /etc/security/limits.conf</p><ul><li><pre><code>  soft    core    unlimited</code></pre></li><li><pre><code>  hard    core    unlimited</code></pre></li><li><pre><code>  soft    nofile  65536</code></pre></li><li><pre><code>  hard    nofile  65536</code></pre></li><li><pre><code>  soft    nproc   65536</code></pre></li><li><pre><code>  hard    nproc   65536</code></pre></li></ul><p>vi /etc/security/limits.d/20-nproc.conf</p><p>vi /etc/rc.local<br />sh /home/AppAutoStart_Redis.sh</p><p>touch /home/AppAutoStart_Redis.sh<br />chown redis:redis /home/AppAutoStart_Redis.sh<br />chmod 744 /home/AppAutoStart_Redis.sh</p><p>vi /etc/hosts</p><p>mkdir -p /redis/install<br />chown redis. -R /redis<br />su - redis</p><p>cd /redis/install/ &amp;&amp; tar zxf redis-4.0.12.tar.gz<br />cd /redis/install/redis-4.0.12<br />REDIS_HOME=/redis/redis-4.0.12<br />cd deps &amp;&amp; make hiredis lua jemalloc linenoise</p><p>cd /redis/install/redis-4.0.12 &amp;&amp; make</p><p>make PREFIX=${REDIS_HOME} install</p><p>ls ${REDIS_HOME}/bin</p><p>export REDIS_HOME=/redis/redis-4.0.12<br />export PATH=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mi>E</mi><mi>D</mi><mi>I</mi><msub><mi>S</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi><mi mathvariant="normal">/</mi><mi>b</mi><mi>i</mi><mi>n</mi><mo>:</mo></mrow><annotation encoding="application/x-tex">REDIS_HOME/bin:</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathrm">/</span><span class="mord mathit">b</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mrel">:</span></span></span></span>PATH<br />mkdir -p ${REDIS_HOME}/conf/<br />mkdir -p ${REDIS_HOME}/tools/</p><p>cp /redis/install/redis-4.0.12/redis.conf ${REDIS_HOME}/conf/<br />cd ${REDIS_HOME}/conf/<br />sed -i “s/daemonize no/daemonize yes/g” redis.conf<br />sed -i “s/pidfile /var/run/redis_6379.pid/pidfile /redis/R_instance_name/redis.pid/g” redis.conf<br />sed -i “s/logfile “”/logfile /redis/R_instance_name/log/redis.log/g” redis.conf<br />sed -i “s/dir .//dir /redis/R_instance_name/snapshot/g” redis.conf<br />sed -i “s/# maxmemory <bytes>/maxmemory R_maxmemory/g” redis.conf<br />sed -i “s/bind 127.0.0.1/bind R_IP/g” redis.conf<br />sed -i “s/port 6379/port R_PORT/g” redis.conf</p><p>vi ${REDIS_HOME}/tools/env.instance</p><p>export instance_name=gdlf<br />export REDIS_HOME=/redis/redis-4.0.12</p><p>vi ${REDIS_HOME}/tools/instance.start.sh</p><p>. /redis/R_instance_name/env.R_instance_name<br />REDIS_BASE_DIR=/redis/R_instance_name<br />redis-server ${REDIS_BASE_DIR}/conf/redis.conf</p><p>vi ${REDIS_HOME}/tools/instance.stop.sh</p><p>. /redis/R_instance_name/env.R_instance_name<br />REDIS_BASE_DIR=/redis/R_instance_name<br />PW=<code>cat $REDIS_BASE_DIR/conf/redis.conf | grep ^requirepass | awk -F &quot;requirepass &quot; '&#123;print $2&#125;' | sed &quot;s/\&quot;//g&quot;</code><br />B_IP=<code>cat $REDIS_BASE_DIR/conf/redis.conf | grep ^bind | awk -F &quot;bind &quot; '&#123;print $2&#125;'</code><br />PORT=<code>cat $REDIS_BASE_DIR/conf/redis.conf | grep ^port | awk -F &quot;port &quot; '&#123;print $2&#125;'</code><br />redis-cli -h ${B_IP} -p <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>P</mi><mi>O</mi><mi>R</mi><mi>T</mi></mrow><mo>−</mo><mi>a</mi><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">{PORT} -a &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span><span class="mbin">−</span><span class="mord mathit">a</span><span class="mord mathrm">&quot;</span></span></span></span>{PW}&quot; shutdown</p><p>vi ${REDIS_HOME}/tools/instance.cli.sh</p><p>. /redis/R_instance_name/env.R_instance_name<br />REDIS_BASE_DIR=/redis/R_instance_name<br />PW=<code>cat $REDIS_BASE_DIR/conf/redis.conf | grep ^requirepass | awk -F &quot;requirepass &quot; '&#123;print $2&#125;' | sed &quot;s/\&quot;//g&quot;</code><br />B_IP=<code>cat $REDIS_BASE_DIR/conf/redis.conf | grep ^bind | awk -F &quot;bind &quot; '&#123;print $2&#125;'</code><br />PORT=<code>cat $REDIS_BASE_DIR/conf/redis.conf | grep ^port | awk -F &quot;port &quot; '&#123;print $2&#125;'</code><br />redis-cli -h ${B_IP} -p <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>P</mi><mi>O</mi><mi>R</mi><mi>T</mi></mrow><mo>−</mo><mi>a</mi><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">{PORT} -a &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span><span class="mbin">−</span><span class="mord mathit">a</span><span class="mord mathrm">&quot;</span></span></span></span>{PW}&quot;</p><p>instance_name=gdlf<br />mkdir -p /redis/${instance_name}/{conf,log,snapshot}<br />cp <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>R</mi><mi>E</mi><mi>D</mi><mi>I</mi><msub><mi>S</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi></mrow><mi mathvariant="normal">/</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{REDIS_HOME}/conf/redis.conf /redis/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit" style="margin-right:0.05764em;">E</span></span><span class="mord mathrm">/</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">/</span></span></span></span>{instance_name}/conf/<br />R_PORT=7379<br />R_instance_name=${instance_name}<br />R_maxmemory=1073741824<br />R_IP=10.240.37.231</p><p>cd /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>I</mi></msub><mi>P</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{instance_name}/conf/sed -i &quot;s/R_IP/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathrm">/</span></span></span></span>{R_IP}/g&quot; redis.conf<br />sed -i “s/R_PORT/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><msub><mi>R</mi><mi>P</mi></msub><mi>O</mi><mi>R</mi><mi>T</mi></mrow><mi mathvariant="normal">/</mi><mi>g</mi><mi mathvariant="normal">&quot;</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>i</mi></msub><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{R_PORT}/g&quot; redis.confsed -i &quot;s/R_instance_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathrm">&quot;</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{R_instance_name}/g” redis.conf<br />sed -i &quot;s/R_maxmemory/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><msub><mi>R</mi><mi>m</mi></msub><mi>a</mi><mi>x</mi><mi>m</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>r</mi><mi>y</mi></mrow><mi mathvariant="normal">/</mi><mi>g</mi><mi mathvariant="normal">&quot;</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>c</mi><mi>a</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{R_maxmemory}/g&quot; redis.confcat /redis/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">m</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathit">m</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit" style="margin-right:0.03588em;">y</span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathrm">&quot;</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">c</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">/</span></span></span></span>{instance_name}/conf/redis.conf | grep -e “^daemonize” -e “^pidfile” -e “^logfile” -e “^dir” -e “^maxmemory” -e “^bind” -e “^port”</p><p>cd /redis/${instance_name}/<br />cp <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>R</mi><mi>E</mi><mi>D</mi><mi>I</mi><msub><mi>S</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi></mrow><mi mathvariant="normal">/</mi><mi>t</mi><mi>o</mi><mi>o</mi><mi>l</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>e</mi><mi>n</mi><mi>v</mi><mi mathvariant="normal">.</mi><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi><mi>e</mi><mi>n</mi><mi>v</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">{REDIS_HOME}/tools/env.instance env.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit" style="margin-right:0.05764em;">E</span></span><span class="mord mathrm">/</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathrm">.</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord mathit">e</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathrm">.</span></span></span></span>{instance_name}<br />cp ${REDIS_HOME}/tools/instance.start.sh <a href="http://start.sh">start.sh</a><br />cp ${REDIS_HOME}/tools/instance.stop.sh <a href="http://stop.sh">stop.sh</a><br />cp ${REDIS_HOME}/tools/instance.cli.sh <a href="http://cli.sh">cli.sh</a></p><p>cd /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>i</mi></msub><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{instance_name}/sed -i &quot;s/R_instance_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{instance_name}/g&quot; env.<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>i</mi></msub><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{instance_name}sed -i &quot;s/R_instance_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{instance_name}/g&quot; <a href="http://start.sh">start.sh</a><br />sed -i “s/R_instance_name/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>g</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>i</mi></msub><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{instance_name}/g&quot; stop.shsed -i &quot;s/R_instance_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit">p</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{instance_name}/g” <a href="http://cli.sh">cli.sh</a><br />chmod +x /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mi>c</mi><mi>h</mi><mi>m</mi><mi>o</mi><mi>d</mi><mo>+</mo><mi>x</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{instance_name}/start.shchmod +x /redis/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathit">m</span><span class="mord mathit">o</span><span class="mord mathit">d</span><span class="mbin">+</span><span class="mord mathit">x</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">/</span></span></span></span>{instance_name}/stop.sh<br />chmod +x /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><msub><mi>e</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>c</mi><mi>l</mi><mi>i</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mi>c</mi><mi>a</mi><mi>t</mi><mo>&gt;</mo><mo>&gt;</mo><mi mathvariant="normal">/</mi><mi>h</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi><mi>A</mi><mi>p</mi><mi>p</mi><mi>A</mi><mi>u</mi><mi>t</mi><mi>o</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><msub><mi>t</mi><mi>R</mi></msub><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mo>&lt;</mo><mo>&lt;</mo><mi>E</mi><mi>O</mi><mi>F</mi><mi>s</mi><mi>u</mi><mo>−</mo><mi>l</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mo>−</mo><mi>c</mi><mi mathvariant="normal">&quot;</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{instance_name}/cli.shcat &gt;&gt; /home/AppAutoStart_Redis.sh &lt;&lt; EOFsu -l redis -c &quot;/redis/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">c</span><span class="mord"><span class="mord mathit">e</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit">c</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mrel">&gt;</span><span class="mrel">&gt;</span><span class="mord mathrm">/</span><span class="mord mathit">h</span><span class="mord mathit">o</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span><span class="mord mathit">A</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit">A</span><span class="mord mathit">u</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mrel">&lt;</span><span class="mrel">&lt;</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mbin">−</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mbin">−</span><span class="mord mathit">c</span><span class="mord mathrm">&quot;</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">/</span></span></span></span>{instance_name}/start.sh&quot;<br />EOF</p><h1 id="redisinstance_namestartsh"><a class="markdownIt-Anchor" href="#redisinstance_namestartsh"></a> /redis/${instance_name}/start.sh</h1><h1 id="redisinstance_nameclish"><a class="markdownIt-Anchor" href="#redisinstance_nameclish"></a> /redis/${instance_name}/cli.sh</h1><p>集群：</p><p>cd /redis/{instance_name}/conf/sed -i "s/\# cluster-config-file nodes-6379.conf/cluster-config-file ..\/conf\/nodes-{instance_name}.conf/g&quot; redis.conf<br />sed -i “s/# cluster-enabled yes/cluster-enabled yes/g” redis.conf<br />sed -i “s/# cluster-node-timeout 15000/cluster-node-timeout 5000/g” redis.conf<br />sed -i “s/# cluster-require-full-coverage yes/cluster-require-full-coverage yes/g” redis.conf<br />cd /redis/${instance_name}/conf/<br />cat redis.conf | grep -e “^cluster-config-file” -e “^cluster-enabled” -e “^cluster-node-timeout” -e “^cluster-require-full-coverage”</p><p>/redis/${instance_name}/start.sh</p><p>root:<br />cd /redis/install<br />umask 022<br />yum -y install ruby<br />cd /redis/install<br />gem install -l redis-3.3.5.gem<br />cp /redis/install/redis-4.0.12/src/redis-trib.rb ${REDIS_HOME}/bin</p><p>redis-trib.rb create 10.240.37.226:7379 10.240.37.245:7379 10.240.37.231:7379<br />redis-trib.rb add-node --slave 10.240.37.231:7380 10.240.37.231:7379<br />redis-trib.rb check 10.240.37.245:7380</p><p>config set masterauth okcenno<br />config set requirepass okcenno<br />auth okcenno<br />config rewrite</p><p>处一节点<br />cd /usr/local/share/gems/gems/redis-3.3.5/lib/redis/<br />PW=okcenno<br />sed -i “s/:password =&gt; nil,/:password =&gt; “${PW}”,/g” client.rb</p><p>redis-trib.rb check 10.240.37.231:7380</p><p>哨兵：<br />sentinel_name=sentinel<br />instance_name=gdlf<br />mkdir -p /redis/${sentinel_name}/{conf,log,snapshot}<br />cp <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>R</mi><mi>E</mi><mi>D</mi><mi>I</mi><msub><mi>S</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi></mrow><mi mathvariant="normal">/</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{REDIS_HOME}/conf/sentinel.conf /redis/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit" style="margin-right:0.05764em;">E</span></span><span class="mord mathrm">/</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">/</span></span></span></span>{sentinel_name}/conf/sentinel.conf</p><p>B_IP=10.240.54.190<br />MASTER_IP=10.240.54.190<br />L_PORT=27379<br />master_name=${instance_name}<br />master_port=7379<br />PW=okcenno</p><p>cd /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi mathvariant="normal">/</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>B</mi><mi>I</mi></msub><mi>P</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{sentinel_name}/conf/sed -i &quot;s/B_IP/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.05017em;">B</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05017em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathrm">/</span></span></span></span>{B_IP}/g&quot; sentinel.conf<br />sed -i “s/MASTER_IP/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>M</mi><mi>A</mi><mi>S</mi><mi>T</mi><mi>E</mi><msub><mi>R</mi><mi>I</mi></msub><mi>P</mi></mrow><mi mathvariant="normal">/</mi><mi>g</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>L</mi><mi>P</mi></msub><mi>O</mi><mi>R</mi><mi>T</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{MASTER_IP}/g&quot; sentinel.confsed -i &quot;s/L_PORT/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit">A</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.07847em;">I</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.13889em;">P</span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit">L</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.13889em;">P</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.13889em;">T</span><span class="mord mathrm">/</span></span></span></span>{L_PORT}/g” sentinel.conf<br />sed -i “s/R_sentinel/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>g</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>m</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>e</mi><msub><mi>r</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{sentinel_name}/g&quot; sentinel.conf sed -i &quot;s/master_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{master_name}/g” sentinel.conf<br />sed -i “s/master_port/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>t</mi><mi>e</mi><msub><mi>r</mi><mi>p</mi></msub><mi>o</mi><mi>r</mi><mi>t</mi></mrow><mi mathvariant="normal">/</mi><mi>g</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi mathvariant="normal">.</mi><mi>c</mi><mi>o</mi><mi>n</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>P</mi><mi>W</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{master_port}/g&quot; sentinel.confsed -i &quot;s/PW/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.02778em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">p</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">t</span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathrm">.</span><span class="mord mathit">c</span><span class="mord mathit">o</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.10764em;">f</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.13889em;">P</span><span class="mord mathit" style="margin-right:0.13889em;">W</span><span class="mord mathrm">/</span></span></span></span>{PW}/g” sentinel.conf</p><p>cat /redis/${sentinel_name}/conf/sentinel.conf</p><p>cd /redis/${sentinel_name}/<br />cp <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>R</mi><mi>E</mi><mi>D</mi><mi>I</mi><msub><mi>S</mi><mi>H</mi></msub><mi>O</mi><mi>M</mi><mi>E</mi></mrow><mi mathvariant="normal">/</mi><mi>t</mi><mi>o</mi><mi>o</mi><mi>l</mi><mi>s</mi><mi mathvariant="normal">/</mi><mi>e</mi><mi>n</mi><mi>v</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>n</mi><mi>v</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">{REDIS_HOME}/tools/env.sentinel env.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit" style="margin-right:0.02778em;">D</span><span class="mord mathit" style="margin-right:0.07847em;">I</span><span class="mord"><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.05764em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.08125em;">H</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mord mathit" style="margin-right:0.05764em;">E</span></span><span class="mord mathrm">/</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="mord mathrm">.</span></span></span></span>{sentinel_name}<br />cp ${REDIS_HOME}/tools/sentinel.start.sh <a href="http://start.sh">start.sh</a><br />cp ${REDIS_HOME}/tools/sentinel.stop.sh <a href="http://stop.sh">stop.sh</a><br />cp ${REDIS_HOME}/tools/sentinel.cli.sh <a href="http://cli.sh">cli.sh</a></p><p>cd /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>s</mi></msub><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{sentinel_name}/sed -i &quot;s/R_sentinel_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">s</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{sentinel_name}/g&quot; env.<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>s</mi></msub><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{sentinel_name}sed -i &quot;s/R_sentinel_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">s</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{sentinel_name}/g&quot; <a href="http://start.sh">start.sh</a><br />sed -i “s/R_sentinel_name/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>g</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi>t</mi><mi>o</mi><mi>p</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>−</mo><mi>i</mi><mi mathvariant="normal">&quot;</mi><mi>s</mi><mi mathvariant="normal">/</mi><msub><mi>R</mi><mi>s</mi></msub><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{sentinel_name}/g&quot; stop.shsed -i &quot;s/R_sentinel_name/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.03588em;">g</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit">p</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mbin">−</span><span class="mord mathit">i</span><span class="mord mathrm">&quot;</span><span class="mord mathit">s</span><span class="mord mathrm">/</span><span class="mord"><span class="mord mathit" style="margin-right:0.00773em;">R</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.00773em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">s</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span></span></span></span>{sentinel_name}/g” <a href="http://cli.sh">cli.sh</a><br />chmod +x /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mi>c</mi><mi>h</mi><mi>m</mi><mi>o</mi><mi>d</mi><mo>+</mo><mi>x</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{sentinel_name}/start.shchmod +x /redis/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">s</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">t</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit">c</span><span class="mord mathit">h</span><span class="mord mathit">m</span><span class="mord mathit">o</span><span class="mord mathit">d</span><span class="mbin">+</span><span class="mord mathit">x</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">/</span></span></span></span>{sentinel_name}/stop.sh<br />chmod +x /redis/<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mi>s</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>n</mi><mi>e</mi><msub><mi>l</mi><mi>n</mi></msub><mi>a</mi><mi>m</mi><mi>e</mi></mrow><mi mathvariant="normal">/</mi><mi>c</mi><mi>l</mi><mi>i</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mi>c</mi><mi>a</mi><mi>t</mi><mo>&gt;</mo><mo>&gt;</mo><mi mathvariant="normal">/</mi><mi>h</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi><mi>A</mi><mi>p</mi><mi>p</mi><mi>A</mi><mi>u</mi><mi>t</mi><mi>o</mi><mi>S</mi><mi>t</mi><mi>a</mi><mi>r</mi><msub><mi>t</mi><mi>R</mi></msub><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi><mi>s</mi><mi>h</mi><mo>&lt;</mo><mo>&lt;</mo><mi>E</mi><mi>O</mi><mi>F</mi><mi>s</mi><mi>u</mi><mo>−</mo><mi>l</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mo>−</mo><mi>c</mi><mi mathvariant="normal">&quot;</mi><mi mathvariant="normal">/</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">/</mi></mrow><annotation encoding="application/x-tex">{sentinel_name}/cli.shcat &gt;&gt; /home/AppAutoStart_Redis.sh &lt;&lt; EOFsu -l redis -c &quot;/redis/</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathit">s</span><span class="mord mathit">e</span><span class="mord mathit">n</span><span class="mord mathit">t</span><span class="mord mathit">i</span><span class="mord mathit">n</span><span class="mord mathit">e</span><span class="mord"><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.01968em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">n</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">a</span><span class="mord mathit">m</span><span class="mord mathit">e</span></span><span class="mord mathrm">/</span><span class="mord mathit">c</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit">i</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mord mathit">c</span><span class="mord mathit">a</span><span class="mord mathit">t</span><span class="mrel">&gt;</span><span class="mrel">&gt;</span><span class="mord mathrm">/</span><span class="mord mathit">h</span><span class="mord mathit">o</span><span class="mord mathit">m</span><span class="mord mathit">e</span><span class="mord mathrm">/</span><span class="mord mathit">A</span><span class="mord mathit">p</span><span class="mord mathit">p</span><span class="mord mathit">A</span><span class="mord mathit">u</span><span class="mord mathit">t</span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.05764em;">S</span><span class="mord mathit">t</span><span class="mord mathit">a</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord"><span class="mord mathit">t</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.00773em;">R</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">.</span><span class="mord mathit">s</span><span class="mord mathit">h</span><span class="mrel">&lt;</span><span class="mrel">&lt;</span><span class="mord mathit" style="margin-right:0.05764em;">E</span><span class="mord mathit" style="margin-right:0.02778em;">O</span><span class="mord mathit" style="margin-right:0.13889em;">F</span><span class="mord mathit">s</span><span class="mord mathit">u</span><span class="mbin">−</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mbin">−</span><span class="mord mathit">c</span><span class="mord mathrm">&quot;</span><span class="mord mathrm">/</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mathit">e</span><span class="mord mathit">d</span><span class="mord mathit">i</span><span class="mord mathit">s</span><span class="mord mathrm">/</span></span></span></span>{sentinel_name}/start.sh&quot;<br />EOF</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;groupadd -g 1862 redis&lt;br /&gt;
useradd -u 1862 -g 1862 -d /redis redis&lt;br /&gt;
chmod -R 750 /redis&lt;br /&gt;
echo abcd1234 | passwd --stdin redis</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/python-pip-configuration/"/>
    <id>http://jsunnyr.github.io/2021/12/05/python-pip-configuration/</id>
    <published>2021-12-05T12:32:55.888Z</published>
    <updated>2021-12-10T11:17:45.748Z</updated>
    
    <content type="html"><![CDATA[<h1 id="linux-mac-windows-安装配置使用pip"><a class="markdownIt-Anchor" href="#linux-mac-windows-安装配置使用pip"></a> Linux / Mac / Windows 安装/配置/使用pip</h1><h2 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">curl curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span><br><span class="line">python get-pip.py</span><br><span class="line">python3 get-pip.py</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 部分Linux可以通过包管理器</span></span><br><span class="line">sudo apt-get install python-pip</span><br></pre></td></tr></table></figure><h2 id="配置国内源"><a class="markdownIt-Anchor" href="#配置国内源"></a> 配置国内源</h2><blockquote><p>UNIX</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.pip/pip.conf</span><br><span class="line">[global]</span><br><span class="line">index-url = https://mirrors.aliyun.com/pypi/simple</span><br><span class="line">[install]</span><br><span class="line">trusted-host = https://mirrors.aliyun.com</span><br></pre></td></tr></table></figure><blockquote><p>NT</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">md %HOMEPATH%\pip</span><br><span class="line">touch %HOMEPATH%\pip\pip.ini</span><br><span class="line">[global]</span><br><span class="line">index-url = https://mirrors.aliyun.com/pypi/simple</span><br><span class="line">[install]</span><br><span class="line">trusted-host = https://mirrors.aliyun.com</span><br></pre></td></tr></table></figure><h2 id="用法"><a class="markdownIt-Anchor" href="#用法"></a> 用法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pip --version</span><br><span class="line">pip3 --version</span><br><span class="line">pip --help</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 升级pip</span></span><br><span class="line">pip install -U pip</span><br><span class="line">sudo easy_install --upgrade pip</span><br><span class="line">python -m pip install -U pip</span><br><span class="line"></span><br><span class="line">pip install package</span><br><span class="line">pip install package==version</span><br><span class="line">pip install package&gt;=version</span><br><span class="line">python2 -m pip install package</span><br><span class="line">python3 -m pip install package</span><br><span class="line">pip install --upgrade package</span><br><span class="line">pip uninstall package</span><br><span class="line"></span><br><span class="line">pip search pacakge</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示安装包信息</span></span><br><span class="line">pip show</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看指定包的详细信息</span></span><br><span class="line">pip show -f package</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 列出已安装的包</span></span><br><span class="line">pip list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看可升级的包</span></span><br><span class="line">pip list -o</span><br></pre></td></tr></table></figure><h1 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> Reference</h1><ul><li><a href="https://www.cnblogs.com/schut/p/10410087.html">cnblogs: Python pip配置国内源</a></li><li><a href="https://www.runoob.com/w3cnote/python-pip-install-usage.html">runoob.com: Python pip 安装与使用</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;linux-mac-windows-安装配置使用pip&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#linux-mac-windows-安装配置使用pip&quot;&gt;&lt;/a&gt; Linux / Mac / Windows 安装/配置/使用pip</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/npm/"/>
    <id>http://jsunnyr.github.io/2021/12/05/npm/</id>
    <published>2021-12-05T12:32:55.859Z</published>
    <updated>2021-12-10T05:36:01.893Z</updated>
    
    <content type="html"><![CDATA[<h1 id="npm"><a class="markdownIt-Anchor" href="#npm"></a> npm</h1><h2 id="npm更换源"><a class="markdownIt-Anchor" href="#npm更换源"></a> npm更换源</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">npm get registry</span><br><span class="line">npm config set registry http://registry.npm.taobao.org/</span><br><span class="line">yarn config set registry http://registry.npm.taobao.org/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装淘宝npm</span></span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">npm list -g --depth 0</span><br><span class="line">npm cache verify</span><br><span class="line">npm cache clean --force</span><br><span class="line">npm uninstall *</span><br></pre></td></tr></table></figure><p><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;npm&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#npm&quot;&gt;&lt;/a&gt; npm&lt;/h1&gt;
&lt;h2 id=&quot;npm更换源&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#npm更换源&quot;&gt;&lt;/a&gt; npm更换源&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/os/rpm/linux_tool_network_related/"/>
    <id>http://jsunnyr.github.io/2021/12/05/os/rpm/linux_tool_network_related/</id>
    <published>2021-12-05T12:32:55.840Z</published>
    <updated>2021-12-05T12:32:55.841Z</updated>
    
    <content type="html"><![CDATA[<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><!-- 2021-01-25 周一 14:28 --><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>&lrm;</title><meta name="generator" content="Org mode" /><style type="text/css"> <!--/*--><![CDATA[/*><!--*/  .title  { text-align: center;             margin-bottom: .2em; }  .subtitle { text-align: center;              font-size: medium;              font-weight: bold;              margin-top:0; }  .todo   { font-family: monospace; color: red; }  .done   { font-family: monospace; color: green; }  .priority { font-family: monospace; color: orange; }  .tag    { background-color: #eee; font-family: monospace;            padding: 2px; font-size: 80%; font-weight: normal; }  .timestamp { color: #bebebe; }  .timestamp-kwd { color: #5f9ea0; }  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }  .org-center { margin-left: auto; margin-right: auto; text-align: center; }  .underline { text-decoration: underline; }  #postamble p, #preamble p { font-size: 90%; margin: .2em; }  p.verse { margin-left: 3%; }  pre {    border: 1px solid #ccc;    box-shadow: 3px 3px 3px #eee;    padding: 8pt;    font-family: monospace;    overflow: auto;    margin: 1.2em;  }  pre.src {    position: relative;    overflow: visible;    padding-top: 1.2em;  }  pre.src:before {    display: none;    position: absolute;    background-color: white;    top: -10px;    right: 10px;    padding: 3px;    border: 1px solid black;  }  pre.src:hover:before { display: inline;}  /* Languages per Org manual */  pre.src-asymptote:before { content: 'Asymptote'; }  pre.src-awk:before { content: 'Awk'; }  pre.src-C:before { content: 'C'; }  /* pre.src-C++ doesn't work in CSS */  pre.src-clojure:before { content: 'Clojure'; }  pre.src-css:before { content: 'CSS'; }  pre.src-D:before { content: 'D'; }  pre.src-ditaa:before { content: 'ditaa'; }  pre.src-dot:before { content: 'Graphviz'; }  pre.src-calc:before { content: 'Emacs Calc'; }  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }  pre.src-fortran:before { content: 'Fortran'; }  pre.src-gnuplot:before { content: 'gnuplot'; }  pre.src-haskell:before { content: 'Haskell'; }  pre.src-hledger:before { content: 'hledger'; }  pre.src-java:before { content: 'Java'; }  pre.src-js:before { content: 'Javascript'; }  pre.src-latex:before { content: 'LaTeX'; }  pre.src-ledger:before { content: 'Ledger'; }  pre.src-lisp:before { content: 'Lisp'; }  pre.src-lilypond:before { content: 'Lilypond'; }  pre.src-lua:before { content: 'Lua'; }  pre.src-matlab:before { content: 'MATLAB'; }  pre.src-mscgen:before { content: 'Mscgen'; }  pre.src-ocaml:before { content: 'Objective Caml'; }  pre.src-octave:before { content: 'Octave'; }  pre.src-org:before { content: 'Org mode'; }  pre.src-oz:before { content: 'OZ'; }  pre.src-plantuml:before { content: 'Plantuml'; }  pre.src-processing:before { content: 'Processing.js'; }  pre.src-python:before { content: 'Python'; }  pre.src-R:before { content: 'R'; }  pre.src-ruby:before { content: 'Ruby'; }  pre.src-sass:before { content: 'Sass'; }  pre.src-scheme:before { content: 'Scheme'; }  pre.src-screen:before { content: 'Gnu Screen'; }  pre.src-sed:before { content: 'Sed'; }  pre.src-sh:before { content: 'shell'; }  pre.src-sql:before { content: 'SQL'; }  pre.src-sqlite:before { content: 'SQLite'; }  /* additional languages in org.el's org-babel-load-languages alist */  pre.src-forth:before { content: 'Forth'; }  pre.src-io:before { content: 'IO'; }  pre.src-J:before { content: 'J'; }  pre.src-makefile:before { content: 'Makefile'; }  pre.src-maxima:before { content: 'Maxima'; }  pre.src-perl:before { content: 'Perl'; }  pre.src-picolisp:before { content: 'Pico Lisp'; }  pre.src-scala:before { content: 'Scala'; }  pre.src-shell:before { content: 'Shell Script'; }  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }  /* additional language identifiers per "defun org-babel-execute"       in ob-*.el */  pre.src-cpp:before  { content: 'C++'; }  pre.src-abc:before  { content: 'ABC'; }  pre.src-coq:before  { content: 'Coq'; }  pre.src-groovy:before  { content: 'Groovy'; }  /* additional language identifiers from org-babel-shell-names in     ob-shell.el: ob-shell is the only babel language using a lambda to put     the execution function name together. */  pre.src-bash:before  { content: 'bash'; }  pre.src-csh:before  { content: 'csh'; }  pre.src-ash:before  { content: 'ash'; }  pre.src-dash:before  { content: 'dash'; }  pre.src-ksh:before  { content: 'ksh'; }  pre.src-mksh:before  { content: 'mksh'; }  pre.src-posh:before  { content: 'posh'; }  /* Additional Emacs modes also supported by the LaTeX listings package */  pre.src-ada:before { content: 'Ada'; }  pre.src-asm:before { content: 'Assembler'; }  pre.src-caml:before { content: 'Caml'; }  pre.src-delphi:before { content: 'Delphi'; }  pre.src-html:before { content: 'HTML'; }  pre.src-idl:before { content: 'IDL'; }  pre.src-mercury:before { content: 'Mercury'; }  pre.src-metapost:before { content: 'MetaPost'; }  pre.src-modula-2:before { content: 'Modula-2'; }  pre.src-pascal:before { content: 'Pascal'; }  pre.src-ps:before { content: 'PostScript'; }  pre.src-prolog:before { content: 'Prolog'; }  pre.src-simula:before { content: 'Simula'; }  pre.src-tcl:before { content: 'tcl'; }  pre.src-tex:before { content: 'TeX'; }  pre.src-plain-tex:before { content: 'Plain TeX'; }  pre.src-verilog:before { content: 'Verilog'; }  pre.src-vhdl:before { content: 'VHDL'; }  pre.src-xml:before { content: 'XML'; }  pre.src-nxml:before { content: 'XML'; }  /* add a generic configuration mode; LaTeX export needs an additional     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */  pre.src-conf:before { content: 'Configuration File'; }  table { border-collapse:collapse; }  caption.t-above { caption-side: top; }  caption.t-bottom { caption-side: bottom; }  td, th { vertical-align:top;  }  th.org-right  { text-align: center;  }  th.org-left   { text-align: center;   }  th.org-center { text-align: center; }  td.org-right  { text-align: right;  }  td.org-left   { text-align: left;   }  td.org-center { text-align: center; }  dt { font-weight: bold; }  .footpara { display: inline; }  .footdef  { margin-bottom: 1em; }  .figure { padding: 1em; }  .figure p { text-align: center; }  .equation-container {    display: table;    text-align: center;    width: 100%;  }  .equation {    vertical-align: middle;  }  .equation-label {    display: table-cell;    text-align: right;    vertical-align: middle;  }  .inlinetask {    padding: 10px;    border: 2px solid gray;    margin: 10px;    background: #ffffcc;  }  #org-div-home-and-up   { text-align: right; font-size: 70%; white-space: nowrap; }  textarea { overflow-x: auto; }  .linenr { font-size: smaller }  .code-highlighted { background-color: #ffff00; }  .org-info-js_info-navigation { border-style: none; }  #org-info-js_console-label    { font-size: 10px; font-weight: bold; white-space: nowrap; }  .org-info-js_search-highlight    { background-color: #ffff00; color: #000000; font-weight: bold; }  .org-svg { width: 90%; }  /*]]>*/--></style><script type="text/javascript">/*@licstart  The following is the entire license notice for theJavaScript code in this tag.Copyright (C) 2012-2020 Free Software Foundation, Inc.The JavaScript code in this tag is free software: you canredistribute it and/or modify it under the terms of the GNUGeneral Public License (GNU GPL) as published by the Free SoftwareFoundation, either version 3 of the License, or (at your option)any later version.  The code is distributed WITHOUT ANY WARRANTY;without even the implied warranty of MERCHANTABILITY or FITNESSFOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.As additional permission under GNU GPL version 3 section 7, youmay distribute non-source (e.g., minimized or compacted) forms ofthat code without the copy of the GNU GPL normally required bysection 4, provided you include this license notice and a URLthrough which recipients can access the Corresponding Source.@licend  The above is the entire license noticefor the JavaScript code in this tag.*/<!--/*--><![CDATA[/*><!--*/ function CodeHighlightOn(elem, id) {   var target = document.getElementById(id);   if(null != target) {     elem.cacheClassElem = elem.className;     elem.cacheClassTarget = target.className;     target.className = "code-highlighted";     elem.className   = "code-highlighted";   } } function CodeHighlightOff(elem, id) {   var target = document.getElementById(id);   if(elem.cacheClassElem)     elem.className = elem.cacheClassElem;   if(elem.cacheClassTarget)     target.className = elem.cacheClassTarget; }/*]]>*///--></script></head><body><div id="content"><p>#title: Linux中网络分析工具</p></div><div id="postamble" class="status"><p class="date">Created: 2021-01-25 周一 14:28</p><p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p></div></body></html>]]></content>
    
    
      
      
    <summary type="html">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-stri</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/os/rpm/linux-sftp-server/"/>
    <id>http://jsunnyr.github.io/2021/12/05/os/rpm/linux-sftp-server/</id>
    <published>2021-12-05T12:32:55.828Z</published>
    <updated>2021-12-05T12:32:55.828Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ftp-server"><a class="markdownIt-Anchor" href="#ftp-server"></a> ftp server</h1><h2 id="构建-ftp-server"><a class="markdownIt-Anchor" href="#构建-ftp-server"></a> 构建 ftp server<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install vsftpd</span><br></pre></td></tr></table></figure><p>ftp的配置文件主要有三个，位于/etc/vsftpd/目录下.</p><ul><li><code>ftpusers</code> 该文件用来指定那些用户不能访问ftp服务器</li><li><code>user_list</code> 该文件用来指示的默认账户在默认情况下也不能访问ftp</li><li><code>vsftpd.conf</code> vsftpd的主配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br><span class="line">anon_upload_enable=NO</span><br><span class="line">anon_mkdir_write_enable=NO</span><br><span class="line">userlist_enable=YES</span><br><span class="line">userlist_file=/etc/vsftpd/vsftpd.user_list</span><br><span class="line">userlist_deny=NO</span><br><span class="line">pasv_min_port=50000</span><br><span class="line">pasv_max_port=60000</span><br></pre></td></tr></table></figure><h1 id="sftp-server"><a class="markdownIt-Anchor" href="#sftp-server"></a> sftp server<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup><sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup><sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></h1><h2 id="构建sftp的目标"><a class="markdownIt-Anchor" href="#构建sftp的目标"></a> 构建sftp的目标</h2><ul><li>安全隔离</li><li>访问控制</li><li>用户控制</li><li>登陆控制</li><li>日志审计<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></li><li>操作审计</li><li>命令审计</li></ul><h2 id="构建-sftp-server"><a class="markdownIt-Anchor" href="#构建-sftp-server"></a> 构建 sftp server</h2><blockquote><p>透过ssh的sftp</p></blockquote><p>sftp采用的是ssh加密隧道，安装性方面较ftp强，而且依赖的是系统自带的ssh服务，不像ftp还需要额外的进行安装.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data/sftp/mysftp</span><br><span class="line">groupadd sftp</span><br><span class="line">useradd -g sftp -d /data/sftp/mysftp -s /bin/false -M mysftp</span><br><span class="line">vim /etc/sshd/sshd_config</span><br><span class="line">    # Subsystem sftp /usr/libexec/openssh/sftp-server -l INFO -f AUTH</span><br><span class="line">    Subsystem sftp internal-sftp -l INFO -f AUTH       # 指定使用sftp服务使用系统自带的internal-sftp</span><br><span class="line">    LogLevel INFO</span><br><span class="line">    Match Group sftp                   # 匹配sftp组的用户,若要匹配多个组,可用逗号分开,也可用“Match User USERNAME”来匹配用户</span><br><span class="line">    ChrootDirectory /data/sftp/%u      # 限制用户的根目录,将用户锁定在自己的home目录中，使其不可浏览上级目录。并且该行一定要在“Match”语句下方. %u 或者 %h</span><br><span class="line">    ForceCommand internal-sftp         # 只能用于sftp登录</span><br><span class="line">    AllowTcpForwarding no              # 禁止用户使用端口转发</span><br><span class="line">    X11Forwarding no                   # 禁止用户使用端口转发</span><br><span class="line">chown root:sftp /data/sftp/mysftp//据说属主必须为root,可以不是root</span><br><span class="line">chmod 755 /data/sftp/mysftp//据说权限应低于等于755,否则登陆报错</span><br><span class="line">mkdir /data/sftp/mysftp/upload</span><br><span class="line">chown mysftp:sftp /data/sftp/mysftp/upload</span><br><span class="line">chmod 755 /data/sftp/mysftp/upload</span><br><span class="line">setenforce 0</span><br><span class="line">systemctl stop firewalld</span><br><span class="line"></span><br><span class="line">sftp mysftp@ip-addr</span><br></pre></td></tr></table></figure><h2 id="注意事项"><a class="markdownIt-Anchor" href="#注意事项"></a> 注意事项<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup></h2><ul><li>ChrootDirectory设置的目录权限及其所有的上级文件夹权限，属主和属组必须是root；</li><li>ChrootDirectory设置的目录权限及其所有的上级文件夹权限，只有属主能拥有写权限，也就是说权限最大设置只能是755</li></ul><blockquote><p>常见报错</p></blockquote><ol><li>/data/sftp目录权限分配不当,属主必须为root,属组可以为sftp组</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sftp -P 12012 userrenwolecom@10.28.204.62</span></span><br><span class="line">userrenwolecom@10.28.204.62&#x27;s password:</span><br><span class="line">packet_write_wait: Connection to 10.28.204.62 port 12012: Broken pipe</span><br><span class="line">Couldn&#x27;t read packet: Connection reset by peer</span><br></pre></td></tr></table></figure><ol start="2"><li>重启sshd后，当前终端不会断开，新建终端输入正确密码后会出现SSH登录闪退（自动关闭终端）问题</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sshd/sshd_config</span><br><span class="line">Match Group username# 此处不应该使用sftp组内的具体某个sftp服务的用户,用该写 sftp组(但是和另一博客的内容有冲突)</span><br></pre></td></tr></table></figure><ol start="3"><li>sshd 启动报错: <code>/var/empty must be owned by root and not group or world-writable.</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 744 /var/empty</span><br><span class="line">chown -R root. /var/empty</span><br></pre></td></tr></table></figure><h1 id="sublime-sftp-插件"><a class="markdownIt-Anchor" href="#sublime-sftp-插件"></a> sublime sftp 插件</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;upload_on_save&quot;</span>: <span class="literal">true</span>,# 保存的时候自动上传到服务器</span><br><span class="line"><span class="string">&quot;sync_down_on_open&quot;</span>: <span class="literal">true</span>,# 开本地文件编辑的时候，自动下载远程文件来更新本地</span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;host&quot;</span>: <span class="string">&quot;xxx.com&quot;</span>,</span><br><span class="line"><span class="string">&quot;user&quot;</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;password&quot;</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line"><span class="string">&quot;port&quot;</span>: <span class="string">&quot;22&quot;</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;remote_path&quot;</span>: <span class="string">&quot;/xxx/xxx&quot;</span>,</span><br></pre></td></tr></table></figure><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://www.jb51.net/article/134082.htm">Linux环境下快速搭建ftp服务器方法介绍</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://www.jb51.net/article/117779.htm">Linux中FTP服务器</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://www.cnblogs.com/reachos/p/11737382.html">sftp 多用户安装与配置</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://www.cnblogs.com/reachos/p/11157329.html">linux如何搭建sftp服务器</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://www.jb51.net/article/101405.htm">Linux 下sftp配置之密钥方式登录详解</a> <a href="#fnref5" class="footnote-backref">↩︎</a></p></li><li id="fn6" class="footnote-item"><p><a href="https://blog.csdn.net/weixin_33709219/article/details/85915241">CentOS下配置SFTP操作日志</a> <a href="#fnref6" class="footnote-backref">↩︎</a></p></li><li id="fn7" class="footnote-item"><p><a href="https://blog.51cto.com/yinkai/1729578">Linux下搭建SFTP服务器</a> <a href="#fnref7" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ftp-server&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#ftp-server&quot;&gt;&lt;/a&gt; ftp server&lt;/h1&gt;
&lt;h2 id=&quot;构建-ftp-server&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://jsunnyr.github.io/2021/12/05/os/rpm/linux-rhel-systemd-tmpfiles/"/>
    <id>http://jsunnyr.github.io/2021/12/05/os/rpm/linux-rhel-systemd-tmpfiles/</id>
    <published>2021-12-05T12:32:55.824Z</published>
    <updated>2021-12-05T12:32:55.825Z</updated>
    
    <content type="html"><![CDATA[<h1 id="systemd-tmpfiles定时清理任务"><a class="markdownIt-Anchor" href="#systemd-tmpfiles定时清理任务"></a> systemd-tmpfiles定时清理任务</h1><ul><li><a href="https://access.redhat.com/solutions/2066083">access.redhat.com How to auto clean up files in a specific directory regularly on RHEL7</a></li><li><a href="https://access.redhat.com/solutions/46083">access.redhat.com How to exclude a folder from getting deleted by “tmpwatch”</a></li><li><a href="https://access.redhat.com/solutions/2931511">access.redhat.com How to exclude files or directories from periodic clean up by tmpfiles-clean</a></li><li><a href="https://access.redhat.com/solutions/3558671">access.redhat.com Oracle application or database failures due to files being deleted within the /tmp or /var/tmp directories</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;systemd-tmpfiles定时清理任务&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#systemd-tmpfiles定时清理任务&quot;&gt;&lt;/a&gt; systemd-tmpfiles定时清理任务&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a hre</summary>
      
    
    
    
    
  </entry>
  
</feed>

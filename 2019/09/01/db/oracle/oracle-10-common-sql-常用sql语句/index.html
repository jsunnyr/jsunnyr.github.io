<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>Oracle 工作常用SQL | Hexo</title><meta name="description" content="12345678910111213141516171819# 查看oracle数据库的字符集select userenv(&amp;#x27;language&amp;#x27;) from dual;# 查看oracle数据库的编码select * from nls_database_parameters where parameter &#x3D;&amp;#x27;NLS_CHARACTERSET&amp;#x27;;# 查询当前"><meta property="og:type" content="article"><meta property="og:title" content="Oracle 工作常用SQL"><meta property="og:url" content="http://jsunnyr.github.io/2019/09/01/db/oracle/oracle-10-common-sql-%E5%B8%B8%E7%94%A8sql%E8%AF%AD%E5%8F%A5/index.html"><meta property="og:site_name" content="InSo"><meta property="og:description" content="12345678910111213141516171819# 查看oracle数据库的字符集select userenv(&amp;#x27;language&amp;#x27;) from dual;# 查看oracle数据库的编码select * from nls_database_parameters where parameter &#x3D;&amp;#x27;NLS_CHARACTERSET&amp;#x27;;# 查询当前"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2019-08-31T16:00:00.000Z"><meta property="article:modified_time" content="2021-12-19T23:03:26.560Z"><meta property="article:author" content="susu"><meta property="article:tag" content="Oracle"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://jsunnyr.github.io/2019/09/01/db/oracle/oracle-10-common-sql-%E5%B8%B8%E7%94%A8sql%E8%AF%AD%E5%8F%A5/index.html"><link rel="alternate" href="/atom.xml" title="InSo" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"></head><body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/jsunnyr" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">素丶素丶丶</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">wodetian</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Earth</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/jsunnyr" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/jsunnyr" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net/jsunnyr" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top"><i class="icon icon-behance"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>✍一✍!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/BSD/">BSD</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">21</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/MySQL/">MySQL</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/MySQL/Profiling/">Profiling</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/Oracle/">Oracle</a><span class="category-list-count">19</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/GNULINUX/">GNULINUX</a><span class="category-list-count">38</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/GNULINUX/Command/">Command</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/GNULINUX/Performance-Tuning/">Performance Tuning</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/GNULINUX/RHEL/">RHEL</a><span class="category-list-count">19</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kernel/">Kernel</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Knowledge/">Knowledge</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/OS/ubuntu/">ubuntu</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/OpenBSD/">OpenBSD</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OpenStack/">OpenStack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/Roadmap/">Roadmap</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Outline/">Outline</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/">Programming</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/CMD/">CMD</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Programming/Powershell/">Powershell</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Security/">Security</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%87%E7%AB%A0%E5%88%86%E7%B1%BB/">文章分类</a><span class="category-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BSD/" rel="tag">BSD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CMD/" rel="tag">CMD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Command/" rel="tag">Command</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Emacs/" rel="tag">Emacs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Experience/" rel="tag">Experience</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GNULINUX/" rel="tag">GNULINUX</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kernel/" rel="tag">Kernel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Knowledge/" rel="tag">Knowledge</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Network/" rel="tag">Network</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OS/" rel="tag">OS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Official-doc/" rel="tag">Official doc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenBSD/" rel="tag">OpenBSD</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenStack/" rel="tag">OpenStack</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Outline/" rel="tag">Outline</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Peformance-Tuning/" rel="tag">Peformance Tuning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance-Tuning/" rel="tag">Performance Tuning</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Perl/" rel="tag">Perl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Powershell/" rel="tag">Powershell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Programming/" rel="tag">Programming</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RHEL/" rel="tag">RHEL</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Roadmap/" rel="tag">Roadmap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby/" rel="tag">Ruby</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Security/" rel="tag">Security</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UNIX/" rel="tag">UNIX</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/asm/" rel="tag">asm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iptables/" rel="tag">iptables</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logstash/" rel="tag">logstash</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package-management/" rel="tag">package-management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service-management/" rel="tag">service-management</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/user-management/" rel="tag">user-management</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xls2csv/" rel="tag">xls2csv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E7%AB%A0%E6%A0%87%E7%AD%BE/" rel="tag">文章标签</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/BSD/" style="font-size:13px">BSD</a> <a href="/tags/CMD/" style="font-size:13px">CMD</a> <a href="/tags/Command/" style="font-size:13.29px">Command</a> <a href="/tags/Emacs/" style="font-size:13px">Emacs</a> <a href="/tags/Experience/" style="font-size:13px">Experience</a> <a href="/tags/GNULINUX/" style="font-size:13.43px">GNULINUX</a> <a href="/tags/Kernel/" style="font-size:13px">Kernel</a> <a href="/tags/Knowledge/" style="font-size:13.43px">Knowledge</a> <a href="/tags/Linux/" style="font-size:13.71px">Linux</a> <a href="/tags/MySQL/" style="font-size:13.57px">MySQL</a> <a href="/tags/Network/" style="font-size:13px">Network</a> <a href="/tags/OS/" style="font-size:13.14px">OS</a> <a href="/tags/Official-doc/" style="font-size:13px">Official doc</a> <a href="/tags/OpenBSD/" style="font-size:13.29px">OpenBSD</a> <a href="/tags/OpenStack/" style="font-size:13px">OpenStack</a> <a href="/tags/Oracle/" style="font-size:13.86px">Oracle</a> <a href="/tags/Outline/" style="font-size:13.14px">Outline</a> <a href="/tags/Peformance-Tuning/" style="font-size:13px">Peformance Tuning</a> <a href="/tags/Performance-Tuning/" style="font-size:13.14px">Performance Tuning</a> <a href="/tags/Perl/" style="font-size:13px">Perl</a> <a href="/tags/Powershell/" style="font-size:13px">Powershell</a> <a href="/tags/Programming/" style="font-size:13px">Programming</a> <a href="/tags/RHEL/" style="font-size:14px">RHEL</a> <a href="/tags/Roadmap/" style="font-size:13px">Roadmap</a> <a href="/tags/Ruby/" style="font-size:13px">Ruby</a> <a href="/tags/Security/" style="font-size:13px">Security</a> <a href="/tags/UNIX/" style="font-size:13px">UNIX</a> <a href="/tags/asm/" style="font-size:13px">asm</a> <a href="/tags/git/" style="font-size:13px">git</a> <a href="/tags/iptables/" style="font-size:13px">iptables</a> <a href="/tags/logstash/" style="font-size:13px">logstash</a> <a href="/tags/npm/" style="font-size:13px">npm</a> <a href="/tags/package-management/" style="font-size:13px">package-management</a> <a href="/tags/service-management/" style="font-size:13px">service-management</a> <a href="/tags/user-management/" style="font-size:13.14px">user-management</a> <a href="/tags/xls2csv/" style="font-size:13px">xls2csv</a> <a href="/tags/%E6%96%87%E7%AB%A0%E6%A0%87%E7%AD%BE/" style="font-size:13px">文章标签</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">55</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">9</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled"><li><div class="item-thumb"><a href="/2021/12/21/security/os-secure/linux-capability-%E5%88%A9%E7%94%A8capability%E8%BF%9B%E8%A1%8CLinux%E6%8F%90%E6%9D%83/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2021/12/21/security/os-secure/linux-capability-%E5%88%A9%E7%94%A8capability%E8%BF%9B%E8%A1%8CLinux%E6%8F%90%E6%9D%83/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-12-21T04:32:21.332Z" itemprop="datePublished">2021-12-21</time></p></div></li><li><div class="item-thumb"><a href="/2021/12/21/security/os-secure/linux-pam-pam%E8%AE%BE%E7%BD%AE/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2021/12/21/security/os-secure/linux-pam-pam%E8%AE%BE%E7%BD%AE/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-12-21T04:29:47.942Z" itemprop="datePublished">2021-12-21</time></p></div></li><li><div class="item-thumb"><a href="/2021/12/21/os/rpm/linux-file-profile/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2021/12/21/os/rpm/linux-file-profile/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-12-21T04:21:47.171Z" itemprop="datePublished">2021-12-21</time></p></div></li><li><div class="item-thumb"><a href="/2021/12/19/os/performance-tuning/linux-kernel-parameters-sysctl/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2021/12/19/os/performance-tuning/linux-kernel-parameters-sysctl/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-12-19T09:25:55.370Z" itemprop="datePublished">2021-12-19</time></p></div></li><li><div class="item-thumb"><a href="/2021/12/19/os/performance-tuning/linux-cpu-analyse/" class="thumb"><span class="thumb-image thumb-none"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2021/12/19/os/performance-tuning/linux-cpu-analyse/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-12-19T07:59:26.633Z" itemprop="datePublished">2021-12-19</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">Catalogue</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#temp-tablespace"><span class="toc-number">1.</span> <span class="toc-text">temp tablespace</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#redo-log-file"><span class="toc-number">2.</span> <span class="toc-text">redo log file</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%90%AF%E5%BD%92%E6%A1%A3%E6%97%A5%E5%BF%97"><span class="toc-number">3.</span> <span class="toc-text">开启归档日志</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAprofile"><span class="toc-number">4.</span> <span class="toc-text">创建profile</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">5.</span> <span class="toc-text">创建用户</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%B6%E9%97%B4"><span class="toc-number">6.</span> <span class="toc-text">时间</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#logfile"><span class="toc-number">7.</span> <span class="toc-text">logfile</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%9B%B8%E5%85%B3"><span class="toc-number">8.</span> <span class="toc-text">用户相关</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E7%9B%B8%E5%85%B3"><span class="toc-number">9.</span> <span class="toc-text">表相关</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">10.</span> <span class="toc-text">视图</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%94%81"><span class="toc-number">11.</span> <span class="toc-text">锁</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E9%A2%84%E8%AE%BE%E5%92%8C%E5%BD%93%E5%89%8Dshared_pool_size-%E5%92%8C-db_cache_size%E5%80%BC"><span class="toc-number">12.</span> <span class="toc-text">查看预设和当前shared_pool_size 和 db_cache_size值</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BB%BA%E8%AE%AE%E5%BD%93%E8%A1%A8%E5%81%9A%E5%A4%A7%E6%89%B9%E9%87%8F%E6%95%B0%E6%8D%AE%E5%8F%98%E6%9B%B4%E5%90%8E%E9%A9%AC%E4%B8%8A%E6%89%8B%E5%B7%A5%E6%94%B6%E9%9B%86%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF"><span class="toc-number">13.</span> <span class="toc-text">建议当表做大批量数据变更后，马上手工收集统计信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E9%98%BB%E5%A1%9E%E4%BF%A1%E6%81%AF"><span class="toc-number">14.</span> <span class="toc-text">查看阻塞信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D%E7%9A%84sid"><span class="toc-number">15.</span> <span class="toc-text">获取当前会话的SID</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E4%BC%9A%E8%AF%9D%E6%89%A7%E8%A1%8C%E7%9A%84sql%E8%AF%AD%E5%8F%A5%E5%8F%8A%E8%BF%9B%E7%A8%8B%E4%BF%A1%E6%81%AF"><span class="toc-number">16.</span> <span class="toc-text">查看当前会话执行的sql语句及进程信息</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A9%E5%AE%9E%E4%BE%8B%E9%87%8D%E6%96%B0%E6%A0%A1%E9%AA%8C%E6%89%80%E6%9C%89online%E6%96%87%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81%E6%81%A2%E5%A4%8D%E6%96%87%E4%BB%B6%E7%9A%84%E5%8F%AF%E7%94%A8%E5%B0%8F%E5%9E%8B"><span class="toc-number">17.</span> <span class="toc-text">让实例重新校验所有online文件的状态，恢复文件的可用小型</span></a></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-db/oracle/oracle-10-common-sql-常用sql语句" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">Oracle 工作常用SQL</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2019/09/01/db/oracle/oracle-10-common-sql-%E5%B8%B8%E7%94%A8sql%E8%AF%AD%E5%8F%A5/" class="article-date"><time datetime="2019-08-31T16:00:00.000Z" itemprop="datePublished">2019-09-01</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/Database/">Database</a>►<a class="article-category-link" href="/categories/Database/Oracle/">Oracle</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/Oracle/" rel="tag">Oracle</a> </span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2019/09/01/db/oracle/oracle-10-common-sql-%E5%B8%B8%E7%94%A8sql%E8%AF%AD%E5%8F%A5/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><hr><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 查看oracle数据库的字符集</span><br><span class="line"><span class="keyword">select</span> userenv(<span class="string">&#x27;language&#x27;</span>) <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line"># 查看oracle数据库的编码</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> nls_database_parameters <span class="keyword">where</span> <span class="keyword">parameter</span> <span class="operator">=</span><span class="string">&#x27;NLS_CHARACTERSET&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询当前oracle的并发连接数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> v$session <span class="keyword">where</span> status<span class="operator">=</span><span class="string">&#x27;ACTIVE&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查看不同用户的连接数</span><br><span class="line"><span class="keyword">select</span> username,<span class="built_in">count</span>(username) <span class="keyword">from</span> v$session <span class="keyword">where</span> username <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">group</span> <span class="keyword">by</span> username;</span><br><span class="line"></span><br><span class="line"># 查询用户会话</span><br><span class="line"><span class="keyword">select</span> username,serial#,sid,program,machine,status <span class="keyword">from</span> vsession <span class="keyword">where</span> username<span class="operator">=</span><span class="string">&#x27;USERNAME&#x27;</span> <span class="keyword">AND</span> STATUS<span class="operator">=</span><span class="string">&#x27;ACTIVE&#x27;</span>;; </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> saddr,sid,serial#,paddr,username,status <span class="keyword">from</span> vsession <span class="keyword">where</span> username <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"># 删除相关用户会话</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> kill session <span class="string">&#x27;sid, serial#&#x27;</span>;</span><br></pre></td></tr></table></figure><p>Oracle 打补丁</p><p>1） 如果服务器是此数据库独占的，可以设置SGA到30%到40%的操作系统物理内存。<br>2） 如果是多个数据库共享的服务器，可以设置SGA为12GB到16GB，具体根据应用压力判断。一般小库可以设置8GB<br>PGA设置为SGA的50%；<br>原则上，主机上所有数据库内存加起来不能超过主机的50%内存。<br>inux主机由于内存通常较多，unix相对较少，所以Linux内存分配为UNIX的1.5倍。</p><h1 id="temp-tablespace"><a class="markdownIt-Anchor" href="#temp-tablespace"></a> temp tablespace</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>space temp <span class="keyword">add</span> tempfile <span class="string">&#x27;+DATA&#x27;</span> size <span class="number">10</span>M autoextend off;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>space temp <span class="keyword">add</span> tempfile size <span class="number">10</span>M autoextend off;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>space temp <span class="keyword">drop</span> tempfile <span class="string">&#x27;+DATA/susu/tempfile/temp.382.1059144303&#x27;</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>space undotbs1 <span class="keyword">add</span> datafile size <span class="number">10</span>M autoextend off;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>space undotbs1 <span class="keyword">add</span> datafile <span class="string">&#x27;+DATA&#x27;</span> size <span class="number">20</span>M autoextend off;</span><br><span class="line"><span class="keyword">select</span> name,<span class="built_in">sum</span>(bytes)<span class="operator">/</span><span class="number">1024</span><span class="operator">/</span><span class="number">1024</span> <span class="keyword">from</span> v$datafile <span class="keyword">group</span> <span class="keyword">by</span> name;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span>space undotbs1 <span class="keyword">drop</span> datafile <span class="string">&#x27;+DATA/susu/datafile/undotbs1.382.1059144851&#x27;</span>;</span><br></pre></td></tr></table></figure><h1 id="redo-log-file"><a class="markdownIt-Anchor" href="#redo-log-file"></a> redo log file</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">group</span>#,status,<span class="keyword">member</span> <span class="keyword">from</span> v$logfile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> database <span class="keyword">add</span> logfile thread <span class="number">1</span> <span class="keyword">group</span> <span class="number">5</span> <span class="string">&#x27;+data&#x27;</span> size <span class="number">30</span>M;</span><br><span class="line"># 日志组成员不需要指定大小，因为所有成员大小都是一样的。</span><br><span class="line"><span class="keyword">alter</span> database <span class="keyword">add</span> logfile <span class="keyword">member</span> <span class="string">&#x27;+data&#x27;</span> <span class="keyword">to</span> <span class="keyword">group</span> <span class="number">5</span>;</span><br><span class="line"><span class="keyword">alter</span> database <span class="keyword">add</span> logfile <span class="keyword">member</span> <span class="string">&#x27;+data/susu/onlinelog/group_5.2.log&#x27;</span> <span class="keyword">to</span> <span class="keyword">group</span> <span class="number">5</span>;</span><br><span class="line"><span class="keyword">ALTER</span> DATABASE <span class="keyword">ADD</span> LOGFILE GROUP6(<span class="string">&#x27;/usr/oracle/app/oradata/orcl/redo06a.log&#x27;</span>,<span class="string">&#x27;/usr/oracle/app/oradata/orcl/redo06b.log&#x27;</span>) SIZE <span class="number">2048</span>M;</span><br><span class="line"><span class="keyword">alter</span> database <span class="keyword">drop</span> logfile <span class="keyword">group</span> <span class="number">5</span>;</span><br></pre></td></tr></table></figure><h1 id="开启归档日志"><a class="markdownIt-Anchor" href="#开启归档日志"></a> 开启归档日志</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sqlplus <span class="operator">/</span> <span class="keyword">as</span> sysdba</span><br><span class="line">shutdown immediate;</span><br><span class="line">startup mount;</span><br><span class="line"><span class="keyword">alter</span> database archivelog;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">system</span> <span class="keyword">set</span> log_archive_dest_1<span class="operator">=</span><span class="string">&#x27;/arch&#x27;</span> <span class="keyword">scope</span><span class="operator">=</span><span class="keyword">both</span>;</span><br><span class="line">archive log list;</span><br><span class="line"><span class="keyword">alter</span> database <span class="keyword">open</span>;</span><br></pre></td></tr></table></figure><h1 id="创建profile"><a class="markdownIt-Anchor" href="#创建profile"></a> 创建profile</h1><h1 id="创建用户"><a class="markdownIt-Anchor" href="#创建用户"></a> 创建用户</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> patrol <span class="keyword">default</span> tablespace users identified <span class="keyword">by</span> <span class="string">&#x27;abcd1234&#x27;</span> profile <span class="keyword">default</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">connect</span>,<span class="keyword">create</span> session,<span class="keyword">alter</span> session,<span class="keyword">select</span> <span class="keyword">any</span> dictionary <span class="keyword">to</span> patrol;</span><br></pre></td></tr></table></figure><h1 id="时间"><a class="markdownIt-Anchor" href="#时间"></a> 时间</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select to_char(sysdate,<span class="string">&#x27;yyyy-mm-dd hh24:mi:ss&#x27;</span>) from dual;</span><br></pre></td></tr></table></figure><h1 id="logfile"><a class="markdownIt-Anchor" href="#logfile"></a> logfile</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select group<span class="comment">#,type,status,member from v$logfile;</span></span><br><span class="line">select group<span class="comment">#,sequence#,status from v$log;</span></span><br><span class="line">alter system switch logfile;</span><br></pre></td></tr></table></figure><h1 id="用户相关"><a class="markdownIt-Anchor" href="#用户相关"></a> 用户相关</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前用户的缺省表空间</span></span><br><span class="line">select username,default_tablespace from user_users;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前用户的角色</span></span><br><span class="line">select * from user_role_privs;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前用户的系统权限和表级权限</span></span><br><span class="line">select * from user_sys_privs;</span><br><span class="line">select * from user_tab_privs;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看用户下所有的表</span></span><br><span class="line">select * from user_tables;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示当前会话所具有的权限</span></span><br><span class="line">select * from session_privs;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示指定用户所具有的系统权限</span></span><br><span class="line">select * from dba_sys_privs <span class="built_in">where</span> grantee=’GAME’;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看名称包含log字符的表</span></span><br><span class="line">select object_name,object_id from user_objects <span class="built_in">where</span> instr(object_name,’LOG’)&gt;0;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看序列号，last_number是当前值</span></span><br><span class="line">select * from user_sequences;</span><br></pre></td></tr></table></figure><h1 id="表相关"><a class="markdownIt-Anchor" href="#表相关"></a> 表相关</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看某表的大小</span></span><br><span class="line">select sum(bytes)/(1024*1024) as “size(M)” from user_segments <span class="built_in">where</span> segment_name=upper(‘&amp;table_name’);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看某表的创建时间</span></span><br><span class="line">select object_name,created from user_objects <span class="built_in">where</span> object_name=upper(‘&amp;table_name’);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看放在ORACLE的内存区里的表</span></span><br><span class="line">select table_name,cache from user_tables <span class="built_in">where</span> instr(cache,’Y<span class="string">&#x27;)&gt;0;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 同义词，查看同义词的名称</span></span><br><span class="line"><span class="string">select * from user_synonyms;</span></span><br></pre></td></tr></table></figure><h1 id="视图"><a class="markdownIt-Anchor" href="#视图"></a> 视图</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看视图的名称</span></span><br><span class="line">select view_name from user_views;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看创建视图的select语句</span></span><br><span class="line">select view_name,text_length from user_views;</span><br><span class="line"><span class="built_in">set</span> long 2000; 说明：可以根据视图的text_length值设定<span class="built_in">set</span> long 的大小</span><br><span class="line">select text from user_views <span class="built_in">where</span> view_name=upper(‘&amp;view_name’);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">select * from dba_users; --数据库用户信息</span><br><span class="line">select * from dba_roles; --角色信息</span><br><span class="line">select * from dba_segments; --表段信息</span><br><span class="line">select * from dba_extents; --数据区信息</span><br><span class="line">select * from dba_objects; --数据库对象信息</span><br><span class="line">select * from dba_lobs; --lob数据信息</span><br><span class="line">select * from dba_tablespaces; --数据库表空间信息</span><br><span class="line">select * from dba_data_files; --数据文件设置信息</span><br><span class="line">select * from dba_temp_files; --临时数据文件信息</span><br><span class="line">select * from dba_rollback_segs; --回滚段信息</span><br><span class="line">select * from dba_ts_quotas; --用户表空间配额信息</span><br><span class="line">select * from dba_free_space; --数据库空闲空间信息</span><br><span class="line">select * from dba_profiles; --数据库用户资源限制信息</span><br><span class="line">select * from dba_sys_privs; --用户的系统权限信息</span><br><span class="line">select * from dba_tab_privs; --用户具有的对象权限信息</span><br><span class="line">select * from dba_col_privs; --用户具有的列对象权限信息</span><br><span class="line">select * from dba_role_privs; --用户具有的角色信息</span><br><span class="line">select * from dba_audit_trail; --审计跟踪记录信息</span><br><span class="line">select * from dba_stmt_audit_opts; --审计设置信息</span><br><span class="line">select * from dba_audit_object; --对象审计结果信息</span><br><span class="line">select * from dba_audit_session; --会话审计结果信息</span><br><span class="line">select * from dba_indexes; --用户模式的索引信息</span><br><span class="line"></span><br><span class="line">select * from all_users; --数据库所有用户的信息</span><br><span class="line">select * from all_objects; --数据库所有的对象的信息</span><br><span class="line">select * from all_def_audit_opts; --所有默认的审计设置信息</span><br><span class="line">select * from all_tables; --所有的表对象信息</span><br><span class="line">select * from all_indexes; --所有的数据库对象索引的信息</span><br><span class="line">select * from all_tab_comments; --查询所有用户的表,视图等</span><br><span class="line">select * from all_col_comments; --查询所有用户的表的列名和注释.</span><br><span class="line">select * from all_tab_columns; --查询所有用户的表的列名等信息(详细但是没有备注)</span><br><span class="line"></span><br><span class="line">select * from user_objects; --用户对象信息</span><br><span class="line">select * from user_source; --数据库用户的所有资源对象信息</span><br><span class="line">select * from user_segments; --用户的表段信息</span><br><span class="line">select * from user_tables; --用户的表对象信息</span><br><span class="line">select * from user_tab_columns; --用户的表列信息</span><br><span class="line">select * from user_constraints; --用户的对象约束信息</span><br><span class="line">select * from user_sys_privs; --当前用户的系统权限信息</span><br><span class="line">select * from user_tab_privs; --当前用户的对象权限信息</span><br><span class="line">select * from user_col_privs; --当前用户的表列权限信息</span><br><span class="line">select * from user_col_comments; -- 查询本用户的表的列名和注释</span><br><span class="line">select * from user_role_privs; --当前用户的角色权限信息</span><br><span class="line">select * from user_indexes; --用户的索引信息</span><br><span class="line">select * from user_ind_columns; --用户的索引对应的表列信息</span><br><span class="line">select * from user_cons_columns; --用户的约束对应的表列信息</span><br><span class="line">select * from user_clusters; --用户的所有簇信息</span><br><span class="line">select * from user_clu_columns; --用户的簇所包含的内容信息</span><br><span class="line">select * from user_cluster_hash_expressions; --散列簇的信息</span><br><span class="line"></span><br><span class="line">select * from v$database; --数据库信息</span><br><span class="line">select * from v$datafile; --数据文件信息</span><br><span class="line">select * from v$controlfile; --控制文件信息</span><br><span class="line">select * from v$logfile; --重做日志信息</span><br><span class="line">select * from v$instance; --数据库实例信息</span><br><span class="line">select * from v$log; --日志组信息</span><br><span class="line">select * from v$loghist; --日志历史信息</span><br><span class="line">select * from v$sga; --数据库SGA信息</span><br><span class="line">select * from v$parameter; --初始化参数信息</span><br><span class="line">select * from v$process; --数据库服务器进程信息</span><br><span class="line">select * from v$bgprocess; --数据库后台进程信息</span><br><span class="line">select * from v$controlfile_record_section; --控制文件记载的各部分信息</span><br><span class="line">select * from v$thread; --线程信息</span><br><span class="line">select * from v$datafile_header; --数据文件头所记载的信息</span><br><span class="line">select * from v$archived_log; --归档日志信息</span><br><span class="line">select * from v$archive_dest; --归档日志的设置信息</span><br><span class="line">select * from v$logmnr_contents; --归档日志分析的DML DDL结果信息</span><br><span class="line">select * from v$logmnr_dictionary; --日志分析的字典文件信息</span><br><span class="line">select * from v$logmnr_logs; --日志分析的日志列表信息</span><br><span class="line">select * from v$tablespace; --表空间信息</span><br><span class="line">select * from v$tempfile; --临时文件信息</span><br><span class="line">select * from v$filestat; --数据文件的I/O统计信息</span><br><span class="line">select * from v$undostat; --Undo数据信息</span><br><span class="line">select * from v$rollname; --在线回滚段信息</span><br><span class="line">select * from v$session; --会话信息</span><br><span class="line">select * from v$transaction; --事务信息</span><br><span class="line">select * from v$rollstat; --回滚段统计信息</span><br><span class="line">select * from v$pwfile_users; --特权用户信息</span><br><span class="line">select * from v$sqlarea; --当前查询过的sql语句访问过的资源及相关的信息</span><br><span class="line">select * from v$sql; --与v$sqlarea基本相同的相关信息</span><br><span class="line">select * from v$sysstat; --数据库系统状态信息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select * from session_roles; --会话的角色信息</span><br><span class="line">select * from session_privs; --会话的权限信息</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select * from dual; --系统伪列表信息</span><br><span class="line">select sysdate from dual; --可将Sysdate视为一个其结果为当前日期和时间的函数，在任何可以使用Oracle函数的地方都可以使用Sysdate。也可以将它视为每个表的一个隐藏的列或伪列。</span><br><span class="line">select current_date from dual; --报告会话的时区中的系统日期。注：可以设置自己的时区，以区别于数据库的时区。</span><br><span class="line">select SYSTIMESTAMP from dual; --报告TIMESTAMP数据类型格式的系统日期。</span><br></pre></td></tr></table></figure><h1 id="锁"><a class="markdownIt-Anchor" href="#锁"></a> 锁</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 锁表SQL查询</span></span><br><span class="line">select object_name,machine,s.sid,s.serial<span class="comment"># from gv$locked_object l, dba_objects d, gv$session s where l.object_id = d.object_id and l.session_id = s.sid</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解除锁表</span></span><br><span class="line">alter system <span class="built_in">kill</span> session <span class="string">&#x27;sid, serial#&#x27;</span>;</span><br></pre></td></tr></table></figure><h1 id="查看预设和当前shared_pool_size-和-db_cache_size值"><a class="markdownIt-Anchor" href="#查看预设和当前shared_pool_size-和-db_cache_size值"></a> 查看预设和当前shared_pool_size 和 db_cache_size值</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select x.ksppinm name,y.ksppstvl value,x.ksppdesc describ</span><br><span class="line"> from sys.x$ksppi x,sys.x$ksppcv y </span><br><span class="line"> where x.inst_id=userenv(&#x27;Instance&#x27;) and y.inst_id=userenv(&#x27;Instance&#x27;) and x.indx=y.indx and x.ksppinm like &#x27;%db_cache_size%&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">select x.ksppinm name,y.ksppstvl value,x.ksppdesc describ from sys.x$ksppi x,sys.x$ksppcv y where x.inst_id=userenv(&#x27;Instance&#x27;) and y.inst_id=userenv(&#x27;Instance&#x27;) and x.indx=y.indx and x.ksppinm like &#x27;%pool_size%&#x27;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select sql_text,parse_calls,loads</span><br><span class="line">from v$sql</span><br><span class="line">where sql_text like &#x27;sql_you_need_specify&#x27;;</span><br></pre></td></tr></table></figure><h1 id="建议当表做大批量数据变更后马上手工收集统计信息"><a class="markdownIt-Anchor" href="#建议当表做大批量数据变更后马上手工收集统计信息"></a> 建议当表做大批量数据变更后，马上手工收集统计信息</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec dbms_stats.gather_table_stats(ownname=&gt;&#x27;&amp;owner&#x27;,tabname=&gt;&#x27;&amp;tablename&#x27;,estimate_percent=&gt;30,block_sample=&gt;TRUE,method_opt=&gt;&#x27;FOR ALL COLUMNS SIZE AUTO&#x27;,degree=&gt;8,granularity=&gt;&#x27;ALL&#x27;,cascade=&gt;true);</span><br></pre></td></tr></table></figure><h1 id="查看阻塞信息"><a class="markdownIt-Anchor" href="#查看阻塞信息"></a> 查看阻塞信息</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select sid,type,lmode,request,ctime,block from v$lock where type=&#x27;TX&#x27;;</span><br><span class="line"></span><br><span class="line">select blocking_session,sid,wait_class,seconds_in_wait from v$session;</span><br><span class="line"></span><br><span class="line">select s.session_id,s.object_id,d.object_name from v$locked_object s,dba_objects d where s.object_id=d.object_id;</span><br><span class="line"></span><br><span class="line">alter system kill session &#x27;sid,serial#&#x27;;</span><br><span class="line"></span><br><span class="line">select sid,serial#,user#,username,status,process,machine,port,program,type,service_name,lockwait from v$session where username is not null and status=&#x27;ACTIVE&#x27; order by logon_time,sid;</span><br></pre></td></tr></table></figure><h1 id="获取当前会话的sid"><a class="markdownIt-Anchor" href="#获取当前会话的sid"></a> 获取当前会话的SID</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM V$SESSION  WHERE AUDSID = USERENV(&#x27;SESSIONID&#x27;);</span><br><span class="line"> </span><br><span class="line">SELECT * FROM V$MYSTAT A WHERE ROWNUM=1;</span><br><span class="line"> </span><br><span class="line">SELECT USERENV(&#x27;SID&#x27;) FROM DUAL;</span><br></pre></td></tr></table></figure><h1 id="查看当前会话执行的sql语句及进程信息"><a class="markdownIt-Anchor" href="#查看当前会话执行的sql语句及进程信息"></a> 查看当前会话执行的sql语句及进程信息</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SELECT P.SPID,</span><br><span class="line">       S.SID,</span><br><span class="line">       S.OSUSER,</span><br><span class="line">       S.MACHINE,</span><br><span class="line">       S.PROGRAM,</span><br><span class="line">       S.LOGON_TIME,</span><br><span class="line">       S.SERIAL#,</span><br><span class="line">       Q.MODULE,</span><br><span class="line">       Q.SQL_ID,</span><br><span class="line">       Q.SQL_TEXT,</span><br><span class="line">       Q.SQL_FULLTEXT</span><br><span class="line">  FROM V$SESSION S, V$PROCESS P, V$SQLAREA Q</span><br><span class="line"> WHERE S.PADDR = P.ADDR(+)</span><br><span class="line">   AND S.SQL_ID = Q.SQL_ID(+)</span><br><span class="line">   AND S.AUDSID = USERENV(&#x27;SESSIONID&#x27;);</span><br></pre></td></tr></table></figure><h1 id="让实例重新校验所有online文件的状态恢复文件的可用小型"><a class="markdownIt-Anchor" href="#让实例重新校验所有online文件的状态恢复文件的可用小型"></a> 让实例重新校验所有online文件的状态，恢复文件的可用小型</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter system check datafiles;</span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://jsunnyr.github.io/2019/09/01/db/oracle/oracle-10-common-sql-%E5%B8%B8%E7%94%A8sql%E8%AF%AD%E5%8F%A5/" title="Oracle 工作常用SQL" target="_blank" rel="external">http://jsunnyr.github.io/2019/09/01/db/oracle/oracle-10-common-sql-常用sql语句/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/jsunnyr" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/jsunnyr" target="_blank"><span class="text-dark">素丶素丶丶</span><small class="ml-1x">wodetian</small></a></h3><div>忍一时越想越气，退一步越想越亏。</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2019/09/01/db/oracle/oracle-09-schema/" title="Oracle schema的解释"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/2019/09/01/db/oracle/oracle-11-user-management-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/" title="Oracle User 用户管理"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button"><span>[&nbsp;</span><span>Catalogue</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/yy.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/xx.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/jsunnyr" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/jsunnyr" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net/jsunnyr" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top"><i class="icon icon-behance"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script></body></html>